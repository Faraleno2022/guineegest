{% extends 'fleet_app/accounts/creation_compte_base.html' %}
{% load static %}

{% block form_content %}
<div class="row justify-content-center">
    <div class="col-md-10">
        <div class="alert alert-success mb-4">
            <i class="fas fa-check-circle me-2"></i>
            <strong>Récapitulatif et confirmation</strong> - Veuillez vérifier les informations saisies avant de créer votre compte.
        </div>
        
        <div class="card mb-4">
            <div class="card-header bg-light">
                <h5 class="mb-0">
                    {% if type_compte == 'personne' %}
                        <i class="fas fa-user me-2"></i> Informations personnelles
                    {% else %}
                        <i class="fas fa-building me-2"></i> Informations sur l'entreprise
                    {% endif %}
                </h5>
            </div>
            <div class="card-body">
                <div class="row">
                    {% if type_compte == 'personne' %}
                        <div class="col-md-6">
                            <p><strong>Nom et Prénom(s):</strong> {{ form_specifique_data.nom_prenom }}</p>
                            {% if form_specifique_data.date_naissance %}
                                <p><strong>Date de naissance:</strong> {{ form_specifique_data.date_naissance|date:"d/m/Y" }}</p>
                            {% endif %}
                        </div>
                        <div class="col-md-6">
                            {% if form_specifique_data.photo %}
                                <p><strong>Photo de profil:</strong> Fournie</p>
                            {% else %}
                                <p><strong>Photo de profil:</strong> Non fournie</p>
                            {% endif %}
                        </div>
                    {% else %}
                        <div class="col-md-6">
                            <p><strong>Nom de l'entreprise:</strong> {{ form_specifique_data.nom_entreprise }}</p>
                            <p><strong>Forme juridique:</strong> {{ form_specifique_data.get_forme_juridique_display }}</p>
                            <p><strong>Nom du responsable:</strong> {{ form_specifique_data.nom_responsable }}</p>
                        </div>
                        <div class="col-md-6">
                            {% if form_specifique_data.rccm_nif %}
                                <p><strong>RCCM / NIF:</strong> {{ form_specifique_data.rccm_nif }}</p>
                            {% endif %}
                            {% if form_specifique_data.logo %}
                                <p><strong>Logo de l'entreprise:</strong> Fourni</p>
                            {% else %}
                                <p><strong>Logo de l'entreprise:</strong> Non fourni</p>
                            {% endif %}
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
        
        <div class="card mb-4">
            <div class="card-header bg-light">
                <h5 class="mb-0"><i class="fas fa-address-card me-2"></i> Informations de contact</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <p><strong>Téléphone:</strong> {{ form_profil_data.telephone }}</p>
                        <p><strong>E-mail:</strong> {{ form_profil_data.email }}</p>
                    </div>
                    <div class="col-md-6">
                        <p><strong>Fonction/Rôle:</strong> {{ form_profil_data.get_role_display }}</p>
                        {% if form_profil_data.adresse %}
                            <p><strong>Adresse:</strong> {{ form_profil_data.adresse }}</p>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        
        <div class="card mb-4">
            <div class="card-header bg-light">
                <h5 class="mb-0"><i class="fas fa-check me-2"></i> Conditions acceptées</h5>
            </div>
            <div class="card-body">
                <ul class="list-group">
                    <li class="list-group-item">
                        <i class="fas fa-check-circle text-success me-2"></i>
                        J'ai lu et j'accepte les conditions générales d'utilisation.
                    </li>
                    <li class="list-group-item">
                        <i class="fas fa-check-circle text-success me-2"></i>
                        Je certifie l'exactitude des informations fournies.
                    </li>
                </ul>
            </div>
        </div>
        
        <form method="post" class="mt-4">
            {% csrf_token %}
            
            <div class="mt-5">
                <div class="d-flex justify-content-between mb-3">
                    <div>
                        <a href="{% url 'fleet_app:retour_etape' etape=4 %}" class="btn btn-outline-secondary">
                            <i class="fas fa-arrow-left me-1"></i> Précédent
                        </a>
                    </div>
                    <div>
                        <button type="submit" class="btn btn-success">
                            <i class="fas fa-check-circle me-1"></i> Créer le compte
                        </button>
                    </div>
                </div>
                
                <div class="text-center mt-4">
                    <p class="text-muted mb-2">Modifier une étape spécifique :</p>
                    <div class="btn-group">
                        <a href="{% url 'fleet_app:retour_etape' etape=1 %}" class="btn btn-sm btn-outline-primary">
                            <i class="fas fa-edit me-1"></i> Type de compte
                        </a>
                        <a href="{% url 'fleet_app:retour_etape' etape=2 %}" class="btn btn-sm btn-outline-primary">
                            <i class="fas fa-edit me-1"></i> Informations spécifiques
                        </a>
                        <a href="{% url 'fleet_app:retour_etape' etape=3 %}" class="btn btn-sm btn-outline-primary">
                            <i class="fas fa-edit me-1"></i> Informations de contact
                        </a>
                        <a href="{% url 'fleet_app:retour_etape' etape=4 %}" class="btn btn-sm btn-outline-primary">
                            <i class="fas fa-edit me-1"></i> Conditions
                        </a>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
{% endblock %}
